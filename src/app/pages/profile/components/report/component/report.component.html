<div [class]="!isLoading ? 'c-loading--hidden c-loading' : 'c-loading'">
    <div
        class="c-loading__status spinner-border m-5"
        role="status"
    >
        <span class="sr-only">Loading...</span>
    </div>
</div>
<div
    class="mr-2 ml-2"
    (swipeleft)="onSwipeLeft($event, -1)"
    (swiperight)="onSwipeRight($event, 1)"
>
    <div class="container-fluid">
        <div class="row header">
            <div class="col-2">
                <div>Bệnh viện:</div>
            </div>
            <div class="col-2">
                <div>{{model?.HospitalName}}</div>
            </div>
            <div class="col-1"></div>
            <div class="col-1"></div>
            <div class="col-2"></div>
            <div class="col-2">
                <div>Số lưu trữ:</div>
            </div>
            <div class="col-2">
                <div>{{model?.StorageNumber}}</div>
            </div>
        </div>
        <div class="row header">
            <div class="col-2">
                <div>Khoa:</div>
            </div>
            <div class="col-2">
                <div>{{model?.HospitalDepartment}}</div>
            </div>
            <div class="col-1">
                <div>Giường:</div>
            </div>
            <div class="col-1">
                <div>{{model?.HospitalBed}}</div>
            </div>
            <div class="col-2"></div>
            <div class="col-2">
                <div>Mã YT:</div>
            </div>
            <div class="col-2">
                <div>{{model?.YTCode}}</div>
            </div>
        </div>
        <div class="br-hr"></div>
        <h1 class="title">Medical Report</h1>
        <div>
            <div
                class="slider"
                *ngIf="slides == 0"
            >
                <h3>I. Individual patient information</h3>
                <div class="row">
                    <div class="col-2 align-self-center">First name:</div>
                    <div class="col-6 align-self-center-details">{{model?.PatientFirstName}}</div>
                    <div class="col-1 align-self-center">Gender:</div>
                    <div class="col-3 align-self-center">
                        <form
                            action=""
                            class="select-gender"
                        >
                            <input
                                type="radio"
                                name="gender"
                                value="male"
                                class="gender"
                                [checked]="model?.PatientGender == 1"
                            />
                            Male<br />
                            <input
                                type="radio"
                                name="gender"
                                value="female"
                                class="gender"
                                [checked]="model?.PatientGender == 2"
                            />
                            Female<br />
                        </form>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 align-self-center">Last name:</div>
                    <div class="col-6 align-self-center-details">{{model?.PatientLastName}}</div>
                    <div class="col-2 align-self-center">Date of birth:</div>
                    <div class="col-2 align-self-center-details">{{model?.PatientDOB | date: "dd/MM/yyyy"}}</div>
                </div>
                <div class="row">
                    <div class="col-2 align-self-center">Phone:</div>
                    <div class="col-6 align-self-center-details">{{model?.PatientPhone}}</div>
                    <div class="col-2 align-self-center">National ID:</div>
                    <div class="col-2 align-self-center-details">{{model?.PatientNationalId}}</div>
                </div>
                <div class="row">
                    <div class="col-2 align-self-center">Email:</div>
                    <div class="col-6 align-self-center-details">{{model?.PatientEmail}}</div>
                    <div class="col-2 align-self-center">Patient ID:</div>
                    <div class="col-2 align-self-center-details">{{model?.PatientId}}</div>
                </div>
                <div class="row">
                    <div class="col-2 align-self-center">Address:</div>
                    <div class="col-8 align-self-center-details">{{model?.PatientAddress}}</div>
                </div>
                <h3>Emergency contact</h3>
                <div class="row">
                    <div class="col-2 align-self-center">First name:</div>
                    <div class="col-6 align-self-center-details">{{model?.EmergencyFirstName}}</div>
                    <div class="col-2 align-self-center">Relationship:</div>
                    <div class="col-2 align-self-center-details">{{model?.EmergencyRelationship}}</div>
                </div>
                <div class="row">
                    <div class="col-2 align-self-center">Last name:</div>
                    <div class="col-6 align-self-center-details">{{model?.EmergencyLastName}}</div>
                    <div class="col-2 align-self-center">Phone:</div>
                    <div class="col-2 align-self-center-details">{{model?.EmergencyPhone}}</div>
                </div>
                <div class="br-hr"></div>
                <h3>II. Medical history</h3>
                <div>
                    <i><u>Medical history </u></i>
                </div>
                <div
                    class="row"
                    *ngFor="let item of model.MedicalHistoryModel"
                >
                    <div class="col-2 align-self-center">Name:</div>
                    <div class="col-6 align-self-center-details">
                        {{item?.SNOMEDCode}}
                    </div>
                    <div class="col-2 align-self-center">Since:</div>
                    <div class="col-2 align-self-center-details">
                        {{item?.StartDate | date: "dd/MM/yyyy"}}
                    </div>
                </div>
                <div class="mt-1e">
                    <i><u>Surgical history</u></i>
                </div>
                <div
                    class="row"
                    *ngFor="let item of model.SurgicalHistoryModel"
                >
                    <div class="col-2 align-self-center">Name:</div>
                    <div class="col-6 align-self-center-details">
                        {{item?.SNOMEDCode}}
                    </div>
                    <div class="col-2 align-self-center">Since:</div>
                    <div class="col-2 align-self-center-details">
                        {{item?.StartDate | date: "dd/MM/yyyy"}}
                    </div>
                </div>
                <h3>III. Family history</h3>
                <div
                    class="row"
                    *ngFor="let item of model.FamilyHistoryModel"
                >
                    <div class="col-3 align-self-center">Name:</div>
                    <div class="col-3 align-self-center-details">{{item?.DiseaseName}}</div>
                    <div class="col-3 align-self-center">Relotionship:</div>
                    <div class="col-3 align-self-center-details">{{item?.Relationship}}</div>
                </div>
                <h3>IV. Social history</h3>
                <div
                    class="row"
                    *ngFor="let item of model.SocialHistoryModel"
                >
                    <div class="col-2 align-self-center">Name:</div>
                    <div class="col-2 align-self-center-details">{{item?.Name}}</div>
                    <div class="col-2 align-self-center">Frequency:</div>
                    <div class="col-2 align-self-center-details">
                        {{item?.Type == 1 ? 'Yes' : item?.Type == 2 ? 'No' :'Stop' }}
                    </div>
                    <!-- <div class="col-4 align-self-center">2 times per week for years</div> -->
                </div>
                <h3>V. Allergy</h3>
                <div
                    class="row"
                    *ngFor="let item of model.AllergyModel"
                >
                    <div class="col-2 align-self-center">Allergy for:</div>
                    <div class="col-2 align-self-center-details">
                        {{item?.SymptomSNOMEDTerm}}
                    </div>
                    <div class="col-2 align-self-center">Since</div>
                    <div class="col-2 align-self-center-details">
                        {{item?.StartDate  | date: "dd/MM/yyyy"}}
                    </div>
                    <div class="col-2 align-self-center">Frequency:</div>
                    <div class="col-2 align-self-center-details">
                        {{item?.Frequency}}
                    </div>
                </div>
                <h3>VI. Medication</h3>
                <table
                    mat-table
                    [dataSource]="model?.MedicationByProblemModel"
                    class="tableStyle"
                >
                    <ng-container matColumnDef="Name">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >
                            Name
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.DrugName }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Dose">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Dose</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.DoseValue }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Frequency">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Frequency</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.FrequencyUnit }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Route">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Route</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.Route }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Details">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Detail</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.Detail }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Purpose">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Purpose</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.Purpose }}</td>
                    </ng-container>
                    <tr
                        mat-header-row
                        *matHeaderRowDef="displayedColumns"
                    ></tr>
                    <tr
                        mat-row
                        *matRowDef="let row; columns: displayedColumns"
                    ></tr>
                </table>
                <div class="bottom">
                    <div class="fz16-c07-mt6">
                        3 of 3
                    </div>
                    <div class="w2-c70"></div>
                    <div>
                        <mat-icon class="fz35-c70">edit</mat-icon>
                        <mat-icon class="fz35-c70">print</mat-icon>
                    </div>
                </div>
            </div>
            <div
                class="slider"
                *ngIf="slides == 2"
            >
                <table
                    mat-table
                    [dataSource]="dataSourceMedicalReport"
                    class="tableStyle"
                >
                    <ng-container matColumnDef="Name">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >
                            Name
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.NameDrug }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Dose">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Dose</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.DoseValue }} {{ element.DoseUnit }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Frequency">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Frequency</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.FrequencyUnit }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Start">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Start</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.StartDate | date: "dd/MM/yyyy" }}</td>
                    </ng-container>
                    <ng-container matColumnDef="End">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >End</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.EndDate  | date: "dd/MM/yyyy" }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Route">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Route</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.NameDrugRoute }}</td>
                    </ng-container>
                    <ng-container matColumnDef="Details">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                        >Detail</th>
                        <td
                            mat-cell
                            *matCellDef="let element"
                        >{{ element.Instruction }}</td>
                    </ng-container>
                    <tr
                        mat-header-row
                        *matHeaderRowDef="columnsMedicalReport"
                    ></tr>
                    <tr
                        mat-row
                        *matRowDef="let row; columns: columnsMedicalReport;"
                    ></tr>

                    <!-- Group header -->
                    <ng-container matColumnDef="groupHeader">
                        <td
                            colspan="999"
                            mat-cell
                            *matCellDef="let groupBy"
                            class="groupByType"
                        >
                            Problem's {{groupBy.initial}}
                        </td>
                    </ng-container>
                    <tr
                        mat-row
                        *matRowDef="let row; columns: ['groupHeader']; when: isGroup"
                    > </tr>

                </table>
                <div class="bottom">
                    <div class="fz16-c07-mt6">
                        1 of 3
                    </div>
                    <div class="w2-c70"></div>
                    <div>
                        <mat-icon class="fz35-c70">edit</mat-icon>
                        <mat-icon class="fz35-c70">print</mat-icon>
                    </div>
                </div>
            </div>
            <div
                class="slider"
                *ngIf="slides == 1"
            >
                <h3>VII. Reason for booking</h3>
                <div
                    class="row"
                    *ngFor="let item of model.ReasonForBookingModel;let ix = index"
                >
                    <div class="col-1 align-self-center">{{ix + 1}}.</div>
                    <div class="col-3 align-self-center-details">
                        {{item?.Name}}
                    </div>
                    <div class="col-8 align-self-center"></div>
                </div>
                <h3>VIII. History</h3>
                <div *ngFor="let item of model.HistoryReport">
                    <div>
                        <i><u>{{item?.Name}}</u></i>
                    </div>
                    <div
                        class="row"
                        *ngFor="let i of item.OldSymptoms;let ix = index"
                    >
                        <div class="col-3 align-self-center">
                            {{ ix == 0 ? 'Old symptoms:' : ''}}
                        </div>
                        <div class="col-9 align-self-center-details">
                            {{ i?.SymptomName}} - {{i?.ResultName}}
                        </div>
                    </div>
                    <div
                        class="row"
                        *ngFor="let i of item.NewSymptoms;let ix = index"
                    >
                        <div class="col-3 align-self-center">
                            {{ ix == 0 ? 'New Symptoms:' : ''}}
                        </div>
                        <div class="col-9 align-self-center-details">
                            {{ i?.SymptomName}} - {{i?.ResultName}}
                        </div>
                    </div>
                    <div
                        class="row"
                        *ngFor="let i of item.ReviewOfSystems;let ix = index"
                    >
                        <div class="col-3 align-self-center">
                            {{ ix == 0 ? 'Review Of Systems:' : ''}}
                        </div>
                        <div class="col-9 align-self-center-details">
                            {{ i?.SymptomName}} - {{i?.ResultName}}
                        </div>
                    </div>
                    <div
                        class="row"
                        *ngFor="let i of item.DailyLife;let ix = index"
                    >
                        <div class="col-3 align-self-center">
                            {{ ix == 0 ? 'Daily Life:' : ''}}
                        </div>
                        <div class="col-9 align-self-center-details">
                            {{ i?.SymptomName}} - {{i?.ResultName}}
                        </div>
                    </div>
                </div>
                <h3>VIII. Vital sign</h3>
                <div *ngFor="let item of model?.VisitVital">
                    <div class="c70-fz16-mt20">
                        Time: {{item?.ResultDate}}
                    </div>
                    <div class="row">
                        <div
                            class="col-6 row"
                            *ngFor="let i of item?.ListVital; let ix = index"
                        >
                            <div class="col-6 align-self-center">{{i?.Name}}</div>
                            <div class="col-6 align-self-center-details">{{i?.NumericValue}}</div>
                        </div>
                    </div>
                </div>
                <h3>IX. Examination</h3>
                <div *ngFor="let i of model.VisitProblemExam">
                    <div class="mt-1e">
                        <i><u>{{i?.ProblemName}}</u></i>
                    </div>
                    <div
                        class="row"
                        *ngFor="let item of i.listExam; let ix2 = index"
                    >
                        <div class="col-3 align-self-center">
                            <div *ngIf="ix2 === 0">Examination's name:</div>
                        </div>
                        <div class="col-9 align-self-center-details">
                            {{item}}
                        </div>
                    </div>
                </div>
                <h3>X. Diagnosis</h3>
                <div *ngFor="let item of model?.VisitProblemDiagnoses">
                    <div class="mt-1e">
                        <i><u>{{item?.ProblemName}}</u></i>
                    </div>
                    <div
                        class="row"
                        *ngFor="let i of item?.VisitDiagnoses; let ix = index"
                    >
                        <div
                            class="col-3 align-self-center"
                            *ngIf="ix === 0"
                        >Diagnosis</div>
                        <div
                            *ngIf="ix === 0"
                            class="col-9 align-self-center-details"
                        >
                            {{i?.Name}}
                        </div>
                        <div
                            *ngIf="ix === 1"
                            class="col-3 align-self-center"
                        >Possible other diagnosis:</div>
                        <div
                            *ngIf="ix === 1"
                            class="col-9 align-self-center-details"
                        >{{i?.Name}}</div>
                        <div
                            *ngIf="ix !== 0 && ix !== 1"
                            class="col-3 align-self-center"
                        ></div>
                        <div
                            *ngIf="ix !== 0 && ix !== 1"
                            class="col-9 align-self-center-details"
                        >{{i?.Name}}</div>
                    </div>
                </div>
                <div class="bottom">
                    <div class="fz16-c07-mt6">
                        2 of 3
                    </div>
                    <div class="w2-c70"></div>
                    <div>
                        <mat-icon class="fz35-c70">edit</mat-icon>
                        <mat-icon class="fz35-c70">print</mat-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>